# Task: Gradius on lesson

Solve:

Для начала скачиваем JADX. После этого открываем прилагаемый к таску APK файл, и исследуем структуру проекта. Зачастую, всё что нужно хранится в package ID, в нашем случае это com => KopohGames.Scheduler (com.KopohGames.Scheduler)

Т.к. наша первая проблема  это экран входа в приложение, мы должны найти этот экран в коде раздекомпилированного приложения.

![](assets/1.png)

Изучая файл `LoginScreen`, находим участок кода который отвечает за вход (по названию `LoginResponse`)

> Строчки кода что относятся к обработке входа в приложение отмечены синим квадратиком

Находим строчки, что отвечают за состояние переменной  `LoginResponse`, которые берутся из такой сущности как ViewModel, с названием `LoginViewModel`

> Использование ViewModel это cтандартная практика разработки приложений, паттерн MVVM. Строчки обращения к сущности ViewModel отмечены зелеными квадратиками

Далее находим участок кода отвечающий за успешную авторизацию в приложении (обведены пурпурным цветом)

![](assets/2.png)

Переходим в `LoginViewModel` для изучения механизма входа, находим тут функцию `loginUser()`, которая внутрь себя принимает логин и пароль, мы на правильном пути

![](assets/3.png)

Видим обращение к файлу `LoginRepository`

Дальше кликая по методу `userLogin(login, password)`, получаем ссылку на этот метод

![](assets/3.png)

Перейдя в метод уже внутри `LoginRepository`, мы видим уже знакомый `LoginResponse` спустившись немного далее, мы наблюдаем условное выражение которое буквально значит что `if(login == "SUPERECLIPSECTF" && password == "I love games!")`

![](assets/4.png)

Данные для входа login это SUPERECLIPSECTF и password это `I love games!`

Далее входим в приложение, видим что ничего нет, и ничего толком не происходит

![](assets/5.jpg)

Но если сильно захотеть, то можно пролистать до 30 октября, и после этого можно увидеть подсказку

![](assets/6.jpg)

Либо же если очень сильно захотеть и изучить механизм поставления расписания, то можно найти эту подсказку в `SharedViewModel`

![](assets/7.png)

Далее начинаем изучать экран настроек `SettingsScreen`, и видим странную сущность под названием `KonamiCodeBox`, начиная изучать эту странную сущность, в которой очень много разного кода (по факту это означает, что она явно отвечает за большую часть экрана)

![](assets/8.png)

Изучив `KonamiCodeBox`, мы видим что осуществление проверки кода Konami происходит при помощи свайпов и тапов, в итоге для того чтобы понять какую последовательность действий надо произвести, надо копать дальше в enum class `Gesture`

![](assets/9.png)

![](assets/10.png)

Чтобы найти последовательность мы должны найти все использования класса `Gesture`, и видим список что задает последовательность действий свайпы: лево, право, лево, право, верх, низ, тап, тап.

![](assets/11.png)

Вводим эту последовательность жестов на экране настроек (может получиться не с первого раза). И в итоге высвечивается такое поле 

![](assets/12.jpg)

Flag: `EclipseCTF{$at0sh1_N4k4m0t0_1s_@l1v3}`
